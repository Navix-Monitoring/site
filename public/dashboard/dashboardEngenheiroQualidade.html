<!DOCTYPE html>
<html lang="pt-BR">

<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Engenheiro Qualidade - Dashboard</title>
<link rel="icon" href="../assets/navix-logo.jpg" />

<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://kit.fontawesome.com/6921956092.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<link href='https://cdn.boxicons.com/2.1.4/css/boxicons.min.css' rel='stylesheet'>

<link rel="stylesheet" href="../css/dashboard.css" />
<script src="../js/sessao.js"></script>

<style>
body {
overflow-x: hidden;
}
</style>
</head>

<body class="bg-gray-100">

<div class="flex flex-row w-full min-h-screen">

<div
class="w-[250px] flex flex-col items-center bg-slate-100 py-6 shadow-2xl shadow-slate-600 fixed top-0 left-0 h-full z-50">
<img src="../assets/img/Logo.png" class="w-[120px] h-[60px] mb-10" />

<div id="imagemUsuarioNavbar">
<div class="rounded-md w-20 h-20 mb-2 bg-gray-300" style="
background-image: url(../assets/img/foto-usuario.png);
background-size: cover;
background-repeat: no-repeat;
background-position: center;
"></div>
</div>

<div id="nomeProfissao" class="text-center mb-6"></div>

<div class="flex flex-col gap-4 w-[80%]">
<a href="../perfil-visualizar.html"
class="w-full bg-white border-2 border-blue-900 rounded-md text-center py-2 hover:text-blue-900 hover:font-medium transition-all">Perfil</a>
<a onclick="redirecionar()"
class="w-full bg-white border-4 border-amber-500 rounded-md text-center py-2 hover:text-blue-900 hover:font-medium cursor-pointer transition-all">Dashboard</a>
<a href="../admin.html" id="adm-only"
class="w-full bg-white border-2 border-blue-900 rounded-md text-center py-2 hover:text-blue-900 hover:font-medium transition-all">Cadastrar
Funcionários</a>
<a href="./cadastroVeiculos.html"
class="w-full bg-white border-2 border-blue-900 rounded-md text-center py-2 hover:text-blue-900 hover:font-medium transition-all">Gerenciar
Frota</a>
<a href="https://navixsuporte.atlassian.net/jira/software/form/9d7593db-d676-44b4-a1f4-43762dea870c"
target="_blank"
class="w-full bg-white border-2 border-blue-900 rounded-md text-center py-2 hover:text-blue-900 hover:font-medium transition-all flex justify-center items-center gap-2">Suporte
<i class='bx bx-message-dots'></i></a>
<div
class="w-full bg-blue-950 text-white rounded-md text-center px-4 py-2 mt-auto cursor-pointer hover:bg-blue-900 transition-all"
onclick="limparSessao()">
<a href="../index.html" class="no-underline text-white block">Sair</a>
</div>
</div>
</div>

<main class="ml-[250px] w-full p-8 flex flex-col gap-6">

<header class="flex justify-between items-center mb-2">
<div>
<h1 class="text-2xl font-bold text-blue-900">Dashboard de Qualidade</h1>
<p class="text-gray-500 text-sm">Gerencie e analise os lotes de produção</p>
</div>
<div class="flex gap-4 text-sm bg-white px-4 py-2 rounded-md shadow-sm border border-gray-200">
<span class="flex items-center gap-1"><span class="w-3 h-3 bg-green-500 rounded-full"></span> Ativo</span>
<span class="flex items-center gap-1"><span class="w-3 h-3 bg-yellow-500 rounded-full"></span>
Manutenção</span>
<span class="flex items-center gap-1"><span class="w-3 h-3 bg-red-500 rounded-full"></span> Inativo</span>
</div>
</header>

<section class="bg-white p-6 rounded-md shadow-md w-full border border-gray-200">
<h3 class="text-lg font-semibold mb-4 text-gray-700 flex items-center gap-2">
<i class='bx bx-filter-alt'></i> Filtros de Busca
</h3>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
<div class="lg:col-span-2">
<label class="text-xs font-bold text-gray-600 ml-1">Código</label>
<div class="relative w-full mt-1">
<input id="ipt_pesquisa" oninput="pesquisar()" type="text" placeholder="Pesquisar lote..."
class="border border-gray-300 rounded-md pl-10 pr-4 py-2 w-full focus:outline-none focus:border-blue-500 transition-colors" />
<i class='bx bx-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xl'></i>
</div>
</div>

<div>
<label class="text-xs font-bold text-gray-600 ml-1">Status</label>
<select id="select_Status"
class="border border-gray-300 rounded-md px-3 py-2 w-full mt-1 focus:outline-none focus:border-blue-500 bg-white"
onchange="filtrar()">
<option value="#">Todos</option>
<option value="ati">Ativo</option>
<option value="man">Manutenção</option>
<option value="ina">Inativo</option>
</select>
</div>

<div>
<label class="text-xs font-bold text-gray-600 ml-1">Data Fabricação</label>
<input type="date" id="data"
class="border border-gray-300 rounded-md px-3 py-2 w-full mt-1 focus:outline-none focus:border-blue-500 text-gray-600"
onchange="filtrarPorData()" />
</div>
</div>

<div class="mt-4 flex justify-end items-center gap-2 text-sm">
<span class="font-bold text-gray-600">Ordenar por:</span>
<select id="ordem"
class="border-b border-gray-300 bg-transparent py-1 px-2 focus:outline-none focus:border-blue-500 cursor-pointer"
onclick="filtrar()">
<option value="desc" selected>Mais recentes</option>
<option value="asc">Mais antigos</option>
</select>
</div>
</section>

<section class="w-full flex-grow flex flex-col">
<div class="flex justify-between items-center mb-4 px-1">
<h3 class="text-lg font-semibold text-gray-700">Listagem de Lotes</h3>
<span class="text-gray-500 text-sm bg-white border border-gray-200 px-3 py-1 rounded shadow-sm"
id="contadorLotes">Total: --</span>
</div>

<div
class="grid grid-cols-5 gap-4 font-bold text-sm text-gray-600 uppercase tracking-wide bg-gray-200 rounded-md p-3 mb-3">
<span>Código / Lote</span>
<!-- <span>Modelo</span> -->
<span>Data Fabricação</span>
<span class="text-center">Status</span>
<!-- <span class="text-right">Ações</span> -->
</div>

<div class="overflow-y-auto h-[600px] pr-2 space-y-3" id="lotes">
</div>
</section>

</main>

<div id="criarEditar"></div>
</div>

<script src="../js/dashboardEngenheiroQualidade.js"></script>
<script src="../js/usuario/verificadorCargo.js"></script>
<script src="../js/redirecionar.js"></script>

<script>
function carregarFotoUsuario() {
var imagemUsuarioNavbar = document.getElementById("imagemUsuarioNavbar");
if (imagemUsuarioNavbar && sessionStorage.imagem) {
imagemUsuarioNavbar.innerHTML = `
<div class="rounded-md w-20 h-20 mb-2 shadow-md border-2 border-white"
style="background-image: url(${sessionStorage.imagem}); background-size: cover; background-repeat: no-repeat; background-position: center;">
</div>
`;
}
}

document.addEventListener("DOMContentLoaded", function () {
if (typeof verificarCargo === 'function') verificarCargo();
carregarFotoUsuario();
if (typeof listarLotes === "function") listarLotes();

var nomeEmpresa = sessionStorage.getItem("nome_ss");
var cargo = sessionStorage.getItem("cargo_ss");
var nomeProfissao = document.getElementById("nomeProfissao");

if (nomeProfissao) {
nomeProfissao.innerHTML = `
<p class="font-bold text-blue-900 text-lg">${nomeEmpresa || 'Empresa'}</p>
<p class="mb-4 text-gray-500 text-sm italic">${cargo || 'Cargo'}</p>
`;
}
});
</script>
</body>

</html>